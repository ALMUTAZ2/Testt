  <!DOCTYPE html>
  <html dir="rtl" lang="ar">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ÙÙˆØ§Ø²ÙŠØ± Ø±Ù…Ø¶Ø§Ù† 1446</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
      <style>
          @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
          
          * {
              font-family: 'Cairo', sans-serif;
          }

          @keyframes floatMoon {
              0% { transform: translateY(0px); }
              50% { transform: translateY(-10px); }
              100% { transform: translateY(0px); }
          }

          .floating-moon {
              animation: floatMoon 3s ease-in-out infinite;
          }

          @keyframes twinkle {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.3; }
          }

          .star {
              position: absolute;
              color: #FCD34D;
              animation: twinkle 2s ease-in-out infinite;
          }

          .option-correct {
              background-color: rgba(34, 197, 94, 0.2) !important;
              border-color: rgb(34, 197, 94) !important;
          }

          .option-wrong {
              background-color: rgba(239, 68, 68, 0.2) !important;
              border-color: rgb(239, 68, 68) !important;
          }

          .option-disabled {
              pointer-events: none;
              opacity: 0.7;
          }

          @keyframes scaleNumber {
              0% { transform: scale(1); opacity: 0; }
              50% { transform: scale(1.5); opacity: 1; }
              100% { transform: scale(1); opacity: 0; }
          }

          .countdown-number {
              animation: scaleNumber 1s ease-out;
          }

          .countdown-text {
              animation: fadeInUp 0.5s ease-out;
          }

          @keyframes fadeInUp {
              from {
                  opacity: 0;
                  transform: translateY(20px);
              }
              to {
                  opacity: 1;
                  transform: translateY(0);
              }
          }
      </style>
  </head>
  <body class="bg-gradient-to-b from-blue-900 to-indigo-950 min-h-screen">
      <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ§Ø±ÙŠØ® -->
      <div class="bg-white/5 backdrop-blur-sm border-b border-white/10 p-3 text-white text-center">
          <div class="max-w-3xl mx-auto flex justify-between items-center">
              <div class="flex items-center gap-2">
                  <span id="day-name" class="text-blue-400"></span>
              </div>
              <div class="flex items-center gap-2">
                  <span id="current-date" class="text-green-400"></span>
              </div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø®Ø§Ø±Ø¬ ÙˆÙ‚Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© -->
      <div id="out-of-time-screen" class="hidden min-h-screen text-white flex items-center justify-center p-6">
          <div class="max-w-md w-full">
              <div class="bg-white/10 backdrop-blur-lg border-2 border-yellow-400/20 rounded-3xl p-8 text-center">
                  <i data-lucide="clock" class="w-16 h-16 mx-auto text-yellow-400 mb-4"></i>
                  <h2 class="text-2xl font-bold text-yellow-400 mb-4">Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                  <p class="text-gray-300 mb-4">Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…ØªØ§Ø­Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© 7 Ù…Ø³Ø§Ø¡Ù‹ Ø­ØªÙ‰ 8 Ù…Ø³Ø§Ø¡Ù‹</p>
                  <div id="time-message" class="text-green-400 text-lg mb-8"></div>
                  <a href="leaderboard.html" class="inline-block bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white px-8 py-3 rounded-xl">
                      Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
                  </a>
              </div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© -->
      <div id="already-participated-screen" class="hidden min-h-screen text-white flex items-center justify-center p-6">
          <div class="max-w-md w-full">
              <div class="bg-white/10 backdrop-blur-lg border-2 border-red-400/20 rounded-3xl p-8 text-center">
                  <i data-lucide="alert-circle" class="w-16 h-16 mx-auto text-red-400 mb-4"></i>
                  <h2 class="text-2xl font-bold text-red-400 mb-4">Ù„Ù‚Ø¯ Ø´Ø§Ø±ÙƒØª Ù…Ø³Ø¨Ù‚Ø§Ù‹</h2>
                  <p class="text-gray-300 mb-6">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ÙÙŠ Ø§Ù„ÙŠÙˆÙ…</p>
                  <a href="leaderboard.html" class="inline-block bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white px-8 py-3 rounded-xl">
                      Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
                  </a>
              </div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
      <div id="start-screen" class="hidden min-h-[calc(100vh-64px)] text-white flex items-center justify-center p-6">
          <div class="max-w-md w-full">
              <div class="bg-white/10 backdrop-blur-lg border-2 border-green-400/20 rounded-3xl p-8">
                  <div class="text-center space-y-6">
                      <div class="relative h-32">
                          <div class="floating-moon">
                              <i data-lucide="moon" class="w-20 h-20 mx-auto text-yellow-400"></i>
                          </div>
                          <div class="absolute bottom-0 w-full">
                              <i data-lucide="star" class="star w-4 h-4" style="left: calc(50% - 20px);"></i>
                              <i data-lucide="star" class="star w-4 h-4" style="left: 50%;"></i>
                              <i data-lucide="star" class="star w-4 h-4" style="left: calc(50% + 20px);"></i>
                          </div>
                      </div>
                      <h1 class="text-3xl font-bold text-yellow-400">ÙÙˆØ§Ø²ÙŠØ± Ø±Ù…Ø¶Ø§Ù†</h1>
                      <div class="space-y-4">
                          <label class="text-lg block text-center mb-2">
                              Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
                          </label>
                          <input
                              type="text"
                              id="player-name"
                              placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ±ÙŠÙ…"
                              class="w-full bg-white/5 border-2 border-green-400/20 text-center text-lg py-6 rounded-xl text-white"
                          >
                      </div>
                      <button
                          id="start-button"
                          class="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-6 rounded-xl text-lg flex items-center justify-center gap-2"
                          disabled
                      >
                          <i data-lucide="sparkles" class="w-5 h-5"></i>
                          Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
                      </button>
                  </div>
              </div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ -->
      <div id="countdown-screen" class="fixed inset-0 bg-blue-900/95 backdrop-blur-sm hidden z-50 flex items-center justify-center">
          <div class="text-center">
              <div id="countdown-number" class="text-8xl font-bold text-yellow-400 mb-4 countdown-number"></div>
              <div id="countdown-text" class="text-2xl text-white countdown-text"></div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
      <div id="quiz-screen" class="min-h-screen text-white p-6 hidden">
          <div class="max-w-3xl mx-auto">
              <div class="text-center mb-8">
                  <h1 class="text-3xl font-bold text-yellow-400 mb-2">ÙÙˆØ§Ø²ÙŠØ± Ø±Ù…Ø¶Ø§Ù†</h1>
                  <p id="player-welcome" class="text-lg text-green-400"></p>
              </div>
              <div class="bg-white/10 backdrop-blur-lg border-2 border-green-400/20 rounded-2xl p-6">
                  <div class="flex justify-between items-center mb-4">
                      <div class="flex items-center gap-2">
                          <i data-lucide="clock" class="w-5 h-5"></i>
                          <span id="timer" class="text-xl font-bold">10</span>
                      </div>
                      <div id="question-counter" class="text-lg"></div>
                  </div>
                  <div class="relative h-2 bg-gray-700/50 rounded-full overflow-hidden mb-6">
                      <div id="timer-bar" class="absolute top-0 left-0 h-full bg-green-400 transition-all duration-1000"></div>
                  </div>
                  <h3 id="question-text" class="text-xl font-semibold mb-6 pr-4 border-r-4 border-green-400"></h3>
                  <div id="options-container" class="space-y-4"></div>
              </div>
          </div>
      </div>

      <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
      <div id="results-screen" class="min-h-screen text-white p-6 hidden">
          <div class="max-w-2xl mx-auto">
              <div class="bg-white/10 backdrop-blur-lg border-2 border-yellow-400/30 rounded-2xl p-8">
                  <i data-lucide="trophy" class="w-16 h-16 mx-auto text-yellow-400 mb-4"></i>
                  <h3 class="text-2xl font-bold text-yellow-400 mb-4 text-center">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
                  <p id="final-name" class="text-xl mb-4 text-center"></p>
                  <p id="final-score" class="text-xl mb-6 text-center"></p>
                  <div id="answers-review" class="space-y-4 mt-8"></div>
                  <div class="flex gap-4 mt-6">
                      <button onclick="location.reload()" class="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-4 rounded-xl text-lg">
                          Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                      </button>
                      <button onclick="window.location.href='leaderboard.html'" class="flex-1 bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white py-4 rounded-xl text-lg">
                          Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
                      </button>
                  </div>
              </div>
          </div>
      </div> 
      <script>
          // ØªÙ‡ÙŠØ¦Ø© Firebase
          const firebaseConfig = {
              apiKey: "AIzaSyC5RYK1lGaJaMQJmOH85cqNgv6m7rbLS_A",
              authDomain: "ramadanmotaz-5570f.firebaseapp.com",
              projectId: "ramadanmotaz-5570f",
              storageBucket: "ramadanmotaz-5570f.appspot.com",
              messagingSenderId: "595667154066",
              appId: "1:595667154066:web:80ba616566ec55a5efe24b"
          };

          let db;
          try {
              if (!firebase.apps.length) {
                  firebase.initializeApp(firebaseConfig);
              }
              db = firebase.firestore();
              console.log('Firebase initialized successfully');
          } catch (error) {
              console.error('Error initializing Firebase:', error);
          }

          // Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
          
const ramadanQuestions = {
    15: [ // Ø§Ù„ÙŠÙˆÙ… 15 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ Ù†Ø²Ù„Øª ÙÙŠ Ù„ÙŠÙ„Ø© Ø§Ù„Ù†ØµÙ Ù…Ù† Ø±Ù…Ø¶Ø§Ù†ØŸ",
            options: ["Ø³ÙˆØ±Ø© Ø§Ù„Ø¯Ø®Ø§Ù†", "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ø¯Ø±", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© ÙŠØ³"],
            correct: 0
        },
        {
            question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙƒØ¹Ø§Øª ÙÙŠ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ Ø§Ù„ØªÙŠ ÙƒØ§Ù† ÙŠØµÙ„ÙŠÙ‡Ø§ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŸ",
            options: ["8 Ø±ÙƒØ¹Ø§Øª", "11 Ø±ÙƒØ¹Ø©", "20 Ø±ÙƒØ¹Ø©", "23 Ø±ÙƒØ¹Ø©"],
            correct: 1
        },
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù†ØµÙ Ù…Ù† Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø£Ø«ÙˆØ±ØŸ",
            options: [
                "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ Ø°Ù†ÙˆØ¨ÙŠ",
                "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø¹ÙÙˆ ØªØ­Ø¨ Ø§Ù„Ø¹ÙÙˆ ÙØ§Ø¹Ù Ø¹Ù†ÙŠ",
                "Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù†",
                "Ø§Ù„Ù„Ù‡Ù… ØªÙ‚Ø¨Ù„ Ù…Ù†Ø§ ØµÙŠØ§Ù…Ù†Ø§"
            ],
            correct: 1
        }
    ],
    16: [ // Ø§Ù„ÙŠÙˆÙ… 16 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…ØªÙ‰ ÙƒØ§Ù†Øª ØºØ²ÙˆØ© Ø¨Ø¯Ø± Ø§Ù„ÙƒØ¨Ø±Ù‰ØŸ",
            options: ["17 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ù‡Ø¬Ø±Ø©", "15 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©", "20 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ù‡Ø¬Ø±Ø©", "10 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©"],
            correct: 0
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø£ÙˆÙ„ Ù…Ø¤Ø°Ù† ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ",
            options: ["Ø¨Ù„Ø§Ù„ Ø¨Ù† Ø±Ø¨Ø§Ø­", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯", "Ø³Ø¹Ø¯ Ø¨Ù† Ø£Ø¨ÙŠ ÙˆÙ‚Ø§Øµ", "Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨"],
            correct: 0
        }
    ],
    17: [ // Ø§Ù„ÙŠÙˆÙ… 17 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø°ÙŠ Ù†Ø²Ù„ ÙÙŠÙ‡ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ",
            options: ["Ø´Ø¹Ø¨Ø§Ù†", "Ø±Ø¬Ø¨", "Ø±Ù…Ø¶Ø§Ù†", "Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©"],
            correct: 2
        },
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù„ÙŠÙ„Ø© Ø§Ù„ØªÙŠ ÙŠÙØ±Ø¬Ù‰ Ø£Ù† ØªÙƒÙˆÙ† Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±ØŸ",
            options: ["Ù…Ù†ØªØµÙ Ø±Ù…Ø¶Ø§Ù†", "Ø£ÙˆÙ„ Ù„ÙŠÙ„Ø© Ù…Ù† Ø±Ù…Ø¶Ø§Ù†", "Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ Ø§Ù„ÙˆØªØ±ÙŠØ© Ù…Ù† Ø§Ù„Ø¹Ø´Ø± Ø§Ù„Ø£ÙˆØ§Ø®Ø±", "Ù„ÙŠÙ„Ø© 15 Ø±Ù…Ø¶Ø§Ù†"],
            correct: 2
        }
    ],
    18: [ // Ø§Ù„ÙŠÙˆÙ… 18 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø·Ø¹Ø§Ù… Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠÙØ¶Ù„Ù‡ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø±ØŸ",
            options: ["Ø§Ù„Ù…Ø§Ø¡", "Ø§Ù„Ø¹Ø³Ù„", "Ø§Ù„ØªÙ…Ø±", "Ø§Ù„Ù„Ø¨Ù†"],
            correct: 2
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø¬Ù‡Ø± Ø¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¹Ù„Ù†Ø§Ù‹ ÙÙŠ Ù…ÙƒØ©ØŸ",
            options: ["Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø­Ù…Ø²Ø© Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø·Ù„Ø¨", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯", "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚"],
            correct: 2
        }
    ],
    19: [ // Ø§Ù„ÙŠÙˆÙ… 19 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…ØªÙ‰ ØªÙ… ÙØªØ­ Ù…ÙƒØ©ØŸ",
            options: ["Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø³Ø§Ø¨Ø¹Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù…Ù†Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„ØªØ§Ø³Ø¹Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¹Ø§Ø´Ø±Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©"],
            correct: 1
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø¨Ø´Ø±Ù‡ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ø¨Ø§Ù„Ø¬Ù†Ø© Ø¨Ø³Ø¨Ø¨ ØµÙŠØ§Ù…Ù‡ Ø§Ù„Ø¯Ø§Ø¦Ù…ØŸ",
            options: ["Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø¹Ù…Ø±Ùˆ Ø¨Ù† Ø§Ù„Ø¹Ø§Øµ", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨", "Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†"],
            correct: 1
        }
    ],
    20: [ // Ø§Ù„ÙŠÙˆÙ… 20 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© ÙØ±Ø¶ Ø§Ù„ØµÙŠØ§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ†ØŸ",
            options: ["Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©", "Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø© Ù„Ù„Ù‡Ø¬Ø±Ø©"],
            correct: 0
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù†Ø§Ù… ÙÙŠ ÙØ±Ø§Ø´ Ø§Ù„Ù†Ø¨ÙŠ ï·º Ù„ÙŠÙ„Ø© Ø§Ù„Ù‡Ø¬Ø±Ø©ØŸ",
            options: ["Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯", "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚"],
            correct: 1
        }
    ],
    21: [ // Ø§Ù„ÙŠÙˆÙ… 21 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªØ³Ù…Ù‰ Ø¨Ø¹Ø±ÙˆØ³ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ",
            options: ["Ø³ÙˆØ±Ø© Ø§Ù„Ø±Ø­Ù…Ù†", "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© ÙŠØ³"],
            correct: 0
        },
        {
            question: "Ø£ÙŠ Ù„ÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ø¹Ø´Ø± Ø§Ù„Ø£ÙˆØ§Ø®Ø± ÙŠØ±Ø¬Ø­ Ø£Ù† ØªÙƒÙˆÙ† Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±ØŸ",
            options: ["Ù„ÙŠÙ„Ø© 25", "Ù„ÙŠÙ„Ø© 21", "Ù„ÙŠÙ„Ø© 27", "Ù„ÙŠÙ„Ø© 29"],
            correct: 2
        }
    ],
    22: [ // Ø§Ù„ÙŠÙˆÙ… 22 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø§Ø¨ØªÙ„Ø¹Ù‡ Ø§Ù„Ø­ÙˆØªØŸ",
            options: ["Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "ÙŠÙˆÙ†Ø³", "Ù…ÙˆØ³Ù‰", "Ù†ÙˆØ­"],
            correct: 1
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ø§Ù„Ø®Ù„ÙØ§Ø¡ Ø§Ù„Ø±Ø§Ø´Ø¯ÙŠÙ†ØŸ",
            options: ["Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨", "Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚", "Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†"],
            correct: 2
        }
    ],
    23: [ // Ø§Ù„ÙŠÙˆÙ… 23 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø±ÙØ¹ Ø¥Ù„ÙŠÙ‡ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ ÙÙŠ Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±ØŸ",
            options: ["Ù…ÙˆØ³Ù‰", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ù…Ø­Ù…Ø¯", "Ø¹ÙŠØ³Ù‰"],
            correct: 2
        },
        {
            question: "Ø£ÙŠ Ù…Ø¯ÙŠÙ†Ø© ØªÙØ¹Ø±Ù Ø¨Ø§Ø³Ù… Ø¨Ù„Ø¯ Ø§Ù„Ù…Ø¦Ø© Ù…Ø¦Ø°Ù†Ø©ØŸ",
            options: ["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", "Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„", "Ø¯Ù…Ø´Ù‚", "Ù…ÙƒØ©"],
            correct: 1
        }
    ],
    24: [ // Ø§Ù„ÙŠÙˆÙ… 24 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒÙ„Ù…Ù‡ Ø§Ù„Ù„Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©ØŸ",
            options: ["Ù…ÙˆØ³Ù‰", "Ø¹ÙŠØ³Ù‰", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ù…Ø­Ù…Ø¯"],
            correct: 0
        },
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø§Ù„Ù†Ø¨ÙŠ ï·º ÙŠÙƒØ«Ø± Ù…Ù†Ù‡ ÙÙŠ Ø§Ù„Ø¹Ø´Ø± Ø§Ù„Ø£ÙˆØ§Ø®Ø±ØŸ",
            options: [
                "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø¹ÙÙˆ ØªØ­Ø¨ Ø§Ù„Ø¹ÙÙˆ ÙØ§Ø¹Ù Ø¹Ù†ÙŠ",
                "Ø±Ø¨ Ø§ØºÙØ± Ù„ÙŠ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠ",
                "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…ØªÙ‚ÙŠÙ†",
                "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¬Ù†Ø©"
            ],
            correct: 0
        }
    ],
    25: [ // Ø§Ù„ÙŠÙˆÙ… 25 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø£Ø´Ø§Ø± Ø¨Ø­ÙØ± Ø§Ù„Ø®Ù†Ø¯Ù‚ ÙÙŠ ØºØ²ÙˆØ© Ø§Ù„Ø£Ø­Ø²Ø§Ø¨ØŸ",
            options: ["Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø³Ù„Ù…Ø§Ù† Ø§Ù„ÙØ§Ø±Ø³ÙŠ", "Ø£Ø¨Ùˆ Ø¹Ø¨ÙŠØ¯Ø© Ø¨Ù† Ø§Ù„Ø¬Ø±Ø§Ø­", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨"],
            correct: 1
        },
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªØ¹Ø§Ø¯Ù„ Ø«Ù„Ø« Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ",
            options: ["Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ", "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†"],
            correct: 1
        }
    ],
    26: [ // Ø§Ù„ÙŠÙˆÙ… 26 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø£ÙˆÙ„ Ø³ÙÙŠØ± ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ",
            options: ["Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯", "Ù…ØµØ¹Ø¨ Ø¨Ù† Ø¹Ù…ÙŠØ±", "Ø¨Ù„Ø§Ù„ Ø¨Ù† Ø±Ø¨Ø§Ø­", "Ø²ÙŠØ¯ Ø¨Ù† Ø«Ø§Ø¨Øª"],
            correct: 1
        },
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙˆÙ„ Ø¢ÙŠØ© Ù†Ø²Ù„Øª Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ",
            options: ["Ø§Ù„Ø±Ø­Ù…Ù† Ø¹Ù„Ù… Ø§Ù„Ù‚Ø±Ø¢Ù†", "Ø¥Ù†Ø§ Ø£Ù†Ø²Ù„Ù†Ø§Ù‡ ÙÙŠ Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±", "Ø§Ù‚Ø±Ø£ Ø¨Ø§Ø³Ù… Ø±Ø¨Ùƒ Ø§Ù„Ø°ÙŠ Ø®Ù„Ù‚", "ÙˆØ§Ù„Ø¹ØµØ± Ø¥Ù† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù„ÙÙŠ Ø®Ø³Ø±"],
            correct: 2
        }
    ],
    27: [ // Ø§Ù„ÙŠÙˆÙ… 27 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø°ÙŠ ÙˆÙ„Ø¯ ÙÙŠÙ‡ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŸ",
            options: ["Ø±Ø¬Ø¨", "Ù…Ø­Ø±Ù…", "Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„", "Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"],
            correct: 2
        },
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù„Ù‚Ø¨ Ø¨Ù€ 'ØªØ±Ø¬Ù…Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†'ØŸ",
            options: ["Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø¹Ø¨Ø§Ø³", "Ø²ÙŠØ¯ Ø¨Ù† Ø«Ø§Ø¨Øª", "Ø£Ø¨Ùˆ Ù‡Ø±ÙŠØ±Ø©"],
            correct: 1
        }
    ],
    28: [ // Ø§Ù„ÙŠÙˆÙ… 28 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¢Ø®Ø± Ù„Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±ØŸ",
            options: ["Ù„ÙŠÙ„Ø© Ø§Ù„Ø¨Ø±ÙƒØ©", "Ù„ÙŠÙ„Ø© Ø§Ù„ÙØ±Ù‚Ø§Ù†", "Ù„ÙŠÙ„Ø© Ø§Ù„Ø±Ø­Ù…Ø©", "Ù„ÙŠÙ„Ø© Ø§Ù„Ù†ÙˆØ±"],
            correct: 0
        },
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ÙƒØ§Ù†Øª Ø³Ø¨Ø¨Ù‹Ø§ ÙÙŠ Ø¥Ø³Ù„Ø§Ù… Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨ØŸ",
            options: ["Ø³ÙˆØ±Ø© Ø§Ù„ÙØªØ­", "Ø³ÙˆØ±Ø© ÙŠØ³", "Ø³ÙˆØ±Ø© Ø·Ù‡", "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¬Ù…"],
            correct: 2
        }
    ],
    29: [ // Ø§Ù„ÙŠÙˆÙ… 29 Ù…Ù† Ø±Ù…Ø¶Ø§Ù†
        {
            question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ù…Ø³ØªØ¬Ø§Ø¨ Ø§Ù„Ø¯Ø¹ÙˆØ©ØŸ",
            options: ["Ø³Ø¹Ø¯ Ø¨Ù† Ø£Ø¨ÙŠ ÙˆÙ‚Ø§Øµ", "Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø£Ø¨Ùˆ Ø¹Ø¨ÙŠØ¯Ø© Ø¨Ù† Ø§Ù„Ø¬Ø±Ø§Ø­", "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø§Ù„Ø²Ø¨ÙŠØ±"],
            correct: 0
        },
        {
            question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ø¨Ø³Ù…Ù„Ø©ØŸ",
            options: ["Ø³ÙˆØ±Ø© Ø§Ù„ØªÙˆØ¨Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙŠÙ„", "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³", "Ø³ÙˆØ±Ø© Ù…Ø±ÙŠÙ…"],
            correct: 0
        }
    ]
};

// ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© initializeQuiz Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ… ÙˆØ¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
async function initializeQuiz() {
    try {
        updateDateTime();
        const isQuizTime = checkQuizTime();
        
        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† Ø±Ù…Ø¶Ø§Ù† (15 ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©)
        const currentRamadanDay = 15; // ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ¹Ù„ÙŠ
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ø³Ø¦Ù„Ø© Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ
        if (!ramadanQuestions[currentRamadanDay]) {
            console.error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…');
            alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…');
            return;
        }

        // ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ
        questionBank = [...ramadanQuestions[currentRamadanDay]];
        
        if (!isQuizTime) {
            elements.startScreen.classList.add('hidden');
            elements.outOfTimeScreen.classList.remove('hidden');
            updateTimeMessage();
            setInterval(updateTimeMessage, 60000);
            return;
        }

        elements.startScreen.classList.remove('hidden');
    } catch (error) {
        console.error('Error initializing quiz:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');
    }
}




        
          // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
          const gameState = {
              playerName: "",
              currentQuestion: 0,
              score: 0,
              answers: [],
              timeLeft: 10,
              timer: null,
              questions: [],
              questionStartTime: null,
              questionTimes: [],
              totalTime: 0,
              isAnswered: false
          };

          // Ø§Ù„Ø¹Ù†Ø§ØµØ±
          const elements = {
              startScreen: document.getElementById('start-screen'),
              quizScreen: document.getElementById('quiz-screen'),
              resultsScreen: document.getElementById('results-screen'),
              countdownScreen: document.getElementById('countdown-screen'),
              playerNameInput: document.getElementById('player-name'),
              startButton: document.getElementById('start-button'),
              playerWelcome: document.getElementById('player-welcome'),
              questionCounter: document.getElementById('question-counter'),
              questionText: document.getElementById('question-text'),
              optionsContainer: document.getElementById('options-container'),
              timer: document.getElementById('timer'),
              timerBar: document.getElementById('timer-bar'),
              outOfTimeScreen: document.getElementById('out-of-time-screen'),
              alreadyParticipatedScreen: document.getElementById('already-participated-screen')
          };

          // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
          function simpleEncrypt(text) {
              return btoa(text + '_' + new Date().toDateString());
          }

          function checkLocalParticipation() {
              const today = new Date().toDateString();
              const participationKey = localStorage.getItem('lastParticipation');
              if (!participationKey) return false;
              
              try {
                  const decrypted = atob(participationKey).split('_')[1];
                  return decrypted === today;
              } catch {
                  return false;
              }
          }

          function recordLocalParticipation() {
              const participationKey = simpleEncrypt('participated');
              localStorage.setItem('lastParticipation', participationKey);
          }

          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆÙ‚Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
          function checkQuizTime() {
              const now = new Date();
              const hours = now.getHours();
              return hours >= 19 && hours < 20; // Ù…Ù† 7 Ù…Ø³Ø§Ø¡Ù‹ Ø­ØªÙ‰ 8 Ù…Ø³Ø§Ø¡Ù‹
          }

          // ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙˆÙ‚Øª
          function updateTimeMessage() {
              const now = new Date();
              const nextQuiz = new Date();
              nextQuiz.setHours(19, 0, 0, 0);

              if (now.getHours() >= 20) {
                  nextQuiz.setDate(nextQuiz.getDate() + 1);
              }

              const timeUntilQuiz = nextQuiz - now;
              const hours = Math.floor(timeUntilQuiz / (1000 * 60 * 60));
              const minutes = Math.floor((timeUntilQuiz % (1000 * 60 * 60)) / (1000 * 60));

              let message;
              if (now.getHours() >= 19 && now.getHours() < 20) {
                  message = "Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†!";
              } else if (now.getHours() >= 20) {
                  message = `Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ØºØ¯Ø§Ù‹ ÙÙŠ ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø§Ø¹Ø© 7 Ù…Ø³Ø§Ø¡Ù‹ (Ù…ØªØ¨Ù‚ÙŠ ${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©)`;
              } else {
                  message = `Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø³ØªØ¨Ø¯Ø£ Ø§Ù„ÙŠÙˆÙ… ÙÙŠ ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø§Ø¹Ø© 7 Ù…Ø³Ø§Ø¡Ù‹ (Ù…ØªØ¨Ù‚ÙŠ ${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©)`;
              }

              document.getElementById('time-message').textContent = message;
          }

          // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
          function updateDateTime() {
              const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
              const now = new Date();
              const dayName = days[now.getDay()];
              const date = now.toLocaleDateString('ar-SA');
              
              document.getElementById('day-name').textContent = dayName;
              document.getElementById('current-date').textContent = date;
          }

          // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
          function startCountdown() {
              const countdownMessages = [
                  { number: 5, text: "Ø§Ø³ØªØ¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠ Ø³ÙŠØ¨Ø¯Ø£! ğŸ”¥" },
                  { number: 4, text: "Ø±ÙƒÙ‘Ø²ØŒ Ø§Ù„ÙØ±ØµØ© Ø£Ù…Ø§Ù…Ùƒ! ğŸš€" },
                  { number: 3, text: "Ù„Ø­Ø¸Ø§Øª Ù„Ù„Ø­Ø³Ù…ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯! âš¡ï¸" },
                  { number: 2, text: "ÙƒÙ† Ø§Ù„Ø£Ø³Ø±Ø¹ØŒ ÙƒÙ† Ø§Ù„Ø£Ø°ÙƒÙ‰! ğŸ†" },
                  { number: 1, text: "Ø§Ù„Ø¢Ù†â€¦ Ø£Ø·Ù„Ù‚ Ø¥Ø¨Ø¯Ø§Ø¹Ùƒ! ğŸ¯" }
              ];

              let currentIndex = 0;
              elements.countdownScreen.classList.remove('hidden');
              
              function updateCountdown() {
                  if (currentIndex >= countdownMessages.length) {
                      elements.countdownScreen.classList.add('hidden');
                      showQuestion();
                      return;
                  }

                  const message = countdownMessages[currentIndex];
                  document.getElementById('countdown-number').textContent = message.number;
                  document.getElementById('countdown-text').textContent = message.text;

                  currentIndex++;
                  setTimeout(updateCountdown, 1000);
              }

              updateCountdown();
          }

          // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„
          function showQuestion() {
              elements.quizScreen.classList.remove('hidden');
              gameState.isAnswered = false;
              
              const question = gameState.questions[gameState.currentQuestion];
              elements.questionCounter.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${gameState.currentQuestion + 1} Ù…Ù† ${gameState.questions.length}`;
              elements.questionText.textContent = question.question;
              
              elements.optionsContainer.innerHTML = question.options.map((option, index) => `
                  <button
                      onclick="handleAnswer(${index})"
                      class="w-full text-right bg-white/5 hover:bg-white/10 border-2 border-green-400/20 p-4 rounded-xl transition-colors"
                  >
                      ${option}
                  </button>
              `).join('');

              gameState.questionStartTime = Date.now();
              startTimer();
              lucide.createIcons();
          }

          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
          function handleAnswer(selectedOption) {
              if (gameState.isAnswered) return;
              gameState.isAnswered = true;
              
              clearInterval(gameState.timer);
              const answerTime = (Date.now() - gameState.questionStartTime) / 1000;
              gameState.questionTimes.push(answerTime);
              
              const question = gameState.questions[gameState.currentQuestion];
              const isCorrect = selectedOption === question.correct;
              
              let points = 0;
              if (isCorrect) {
                  if (answerTime <= 3) points = 100;
                  else if (answerTime <= 5) points = 80;
                  else if (answerTime <= 7) points = 60;
                  else points = 40;
              }
              
              gameState.score += points;
              gameState.totalTime += answerTime;

              const options = elements.optionsContainer.children;
              Array.from(options).forEach(option => {
                  option.classList.add('option-disabled');
              });
              
              options[selectedOption].classList.add(isCorrect ? 'option-correct' : 'option-wrong');
              if (!isCorrect) {
                  options[question.correct].classList.add('option-correct');
              }

              gameState.answers.push({
                  question: question.question,
                  selectedAnswer: question.options[selectedOption],
                  correctAnswer: question.options[question.correct],
                  isCorrect: isCorrect,
                  time: answerTime,
                  points: points
              });

              setTimeout(() => {
                  if (gameState.currentQuestion < gameState.questions.length - 1) {
                      gameState.currentQuestion++;
                      showQuestion();
                  } else {
                      showResults();
                  }
              }, 1500);
          }

          // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
          function startTimer() {
              gameState.timeLeft = 10;
              elements.timer.textContent = gameState.timeLeft;
              elements.timerBar.style.width = '100%';
              
              clearInterval(gameState.timer);
              gameState.timer = setInterval(() => {
                  gameState.timeLeft--;
                  elements.timer.textContent = gameState.timeLeft;
                  elements.timerBar.style.width = `${(gameState.timeLeft / 10) * 100}%`;
                  
                  if (gameState.timeLeft <= 0) {
                      clearInterval(gameState.timer);
                      handleTimeUp();
                  }
              }, 1000);
          }

          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
          function handleTimeUp() {
              if (gameState.isAnswered) return;
              handleAnswer(-1);
          }

          // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
          async function showResults() {
              try {
                  elements.quizScreen.classList.add('hidden');
                  elements.resultsScreen.classList.remove('hidden');

                  const playerData = {
                      playerName: gameState.playerName,
                      score: gameState.score,
                      totalTime: gameState.totalTime,
                      timestamp: firebase.firestore.FieldValue.serverTimestamp()
                  };

                  await db.collection('scores').add(playerData);

                  document.getElementById('final-name').textContent = `Ø§Ù„Ø§Ø³Ù…: ${gameState.playerName}`;
                  document.getElementById('final-score').innerHTML = `
                      Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameState.score}<br>
                      Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${gameState.totalTime.toFixed(2)} Ø«Ø§Ù†ÙŠØ©
                  `;

                  const answersHtml = gameState.answers.map((answer, index) => `
                      <div class="bg-white/5 p-4 rounded-xl">
                          <div class="font-bold mb-2">Ø§Ù„Ø³Ø¤Ø§Ù„ ${index + 1}</div>
                          <div class="text-sm opacity-90 mb-2">${answer.question}</div>
                          <div class="text-sm ${answer.isCorrect ? 'text-green-400' : 'text-red-400'}">
                              Ø¥Ø¬Ø§Ø¨ØªÙƒ: ${answer.selectedAnswer}
                              ${!answer.isCorrect ? `<br>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${answer.correctAnswer}` : ''}
                          </div>
                          <div class="text-sm mt-2">
                              Ø§Ù„ÙˆÙ‚Øª: ${answer.time.toFixed(2)} Ø«Ø§Ù†ÙŠØ©
                              <br>
                              Ø§Ù„Ù†Ù‚Ø§Ø·: ${answer.points}
                          </div>
                      </div>
                  `).join('');

                  document.getElementById('answers-review').innerHTML = answersHtml;
                  lucide.createIcons();

              } catch (error) {
                  console.error('Error saving results:', error);
                  alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
              }
          }

          // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
          async function startQuiz() {
              try {
                  gameState.playerName = elements.playerNameInput.value.trim();
                  
                  if (checkLocalParticipation()) {
                      elements.startScreen.classList.add('hidden');
                      elements.alreadyParticipatedScreen.classList.remove('hidden');
                      return;
                  }

                  recordLocalParticipation();
                  
                  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ ÙÙŠ Firebase Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙ‚Ø·
                  try {
                      await db.collection('participants').add({
                          playerName: gameState.playerName,
                          timestamp: firebase.firestore.FieldValue.serverTimestamp()
                      });
                  } catch (error) {
                      console.error('Error recording participation in Firebase:', error);
                      // Ù„Ø§ Ù†ÙˆÙ‚Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Firebase
                  }
                  
                  gameState.questions = [...questionBank];
                  elements.startScreen.classList.add('hidden');
                  elements.playerWelcome.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${gameState.playerName}!`;
                  
                  startCountdown();
              } catch (error) {
                  console.error('Error starting quiz:', error);
                  alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
              }
          }

          // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
          async function initializeQuiz() {
              try {
                  updateDateTime();
                  const isQuizTime = checkQuizTime();
                  
                  if (!isQuizTime) {
                      elements.startScreen.classList.add('hidden');
                      elements.outOfTimeScreen.classList.remove('hidden');
                      updateTimeMessage();
                      setInterval(updateTimeMessage, 60000);
                      return;
                  }

                  elements.startScreen.classList.remove('hidden');
              } catch (error) {
                  console.error('Error initializing quiz:', error);
                  alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');
              }
          }

          // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
          elements.playerNameInput.addEventListener('input', () => {
              elements.startButton.disabled = !elements.playerNameInput.value.trim();
          });

          elements.startButton.addEventListener('click', startQuiz);

          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
          setInterval(() => {
              const isQuizTime = checkQuizTime();
              if (!isQuizTime && !elements.outOfTimeScreen.classList.contains('hidden')) {
                  window.location.href = 'leaderboard.html';
              }
          }, 60000);

          // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
          document.addEventListener('DOMContentLoaded', function() {
              try {
                  lucide.createIcons();
                  initializeQuiz();
              } catch (error) {
                  console.error('Error initializing app:', error);
              }
          });
      </script>
  </body>
  </html> 
